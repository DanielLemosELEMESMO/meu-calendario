# Plano de Versão: v0.2.0 - Autenticação Completa e Conexão Frontend/Backend

Este documento detalha o plano para a `v0.2.0` do "MeuCalendario", focando em completar o fluxo de autenticação OAuth 2.0 com o Google, permitindo que o frontend detecte o estado de login do usuário e exiba a interface do calendário apropriadamente.

---

## 1. Objetivos da Versão

O principal objetivo da `v0.2.0` é fazer com que o fluxo de autenticação com o Google seja funcional de ponta a ponta, permitindo que o usuário faça login e veja a interface principal do aplicativo sem mais interações de login.

## 2. Escopo Detalhado

### 2.1. Backend (`server/`)

*   **`fix:` Troca do Código de Autorização por Tokens:**
    *   **Onde:** `server/src/controllers/authController.js` (`handleGoogleCallback`)
    *   **O que fazer:** Implementar a lógica para trocar o `code` recebido do Google por `access_token` e `refresh_token` usando `oauth2Client.getToken(code)`.
*   **`fix:` Armazenamento Temporário de Tokens:**
    *   **Onde:** `server/src/controllers/authController.js` (`handleGoogleCallback`)
    *   **O que fazer:** Por enquanto, para `v0.2.0`, armazenaremos os tokens em uma variável de sessão ou diretamente na resposta para o frontend. Em `v0.x.x` futuras, os tokens serão persistidos no banco de dados.
*   **`fix:` Redirecionamento para o Frontend com Status de Autenticação:**
    *   **Onde:** `server/src/controllers/authController.js` (`handleGoogleCallback`)
    *   **O que fazer:** Após obter os tokens, redirecionar o usuário de volta para o frontend (ex: `http://localhost:5173`) com um parâmetro de query indicando sucesso (ex: `?auth_success=true`).

### 2.2. Frontend (`client/`)

*   **`fix:` Detecção do Status de Autenticação na URL:**
    *   **Onde:** `client/src/App.tsx`
    *   **O que fazer:** Modificar o `App.tsx` para verificar a URL atual na montagem do componente. Se o parâmetro `?auth_success=true` estiver presente, definir `isAuthenticated` como `true`.
*   **`feat:` Recuperação e Utilização de Tokens (Opcional - Próxima Versão):**
    *   Nesta versão, focaremos apenas em *detectar* a autenticação. A recuperação dos tokens para uso em chamadas à API será abordada em versões posteriores.

---

## 3. Análise de Arquitetura e SOLID

*   **Princípio da Responsabilidade Única (SRP):**
    *   Continuaremos a manter a lógica de autenticação confinada ao `authController.js` no backend.
*   **Princípio Aberto/Fechado (OCP):**
    *   A estrutura existente permite estender o `authController` para lidar com o armazenamento persistente dos tokens sem modificar a lógica central de troca de código.

---

Este plano detalha as próximas etapas para a `v0.2.0`.